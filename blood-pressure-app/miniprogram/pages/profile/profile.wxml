<!--pages/profile/profile.wxml-->
<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="card user-info-card">
    <view class="user-avatar">
      <view class="avatar-placeholder" wx:if="{{!userInfo.avatar}}">
        <text class="avatar-text">{{userInfo.nickname ? userInfo.nickname.charAt(0) : 'ç”¨'}}</text>
      </view>
      <image class="avatar-img" wx:else src="{{userInfo.avatar}}" mode="aspectFill"></image>
    </view>
    <view class="user-details">
      <text class="username">{{userInfo.nickname || 'æœªç™»å½•ç”¨æˆ·'}}</text>
      <text class="user-status">{{loginStatus}}</text>
    </view>
    <view class="login-btn" wx:if="{{!isLoggedIn}}">
      <button class="btn btn-primary btn-small" bindtap="handleLogin">ç™»å½•</button>
    </view>
  </view>

  <!-- æ•°æ®ç»Ÿè®¡ -->
  <view class="card stats-overview-card" wx:if="{{isLoggedIn}}">
    <view class="card-header">
      <text class="card-title">æˆ‘çš„æ•°æ®</text>
    </view>
    <view class="card-content">
      <view class="stats-grid">
        <view class="stats-item">
          <text class="stats-value">{{userStats.totalRecords || 0}}</text>
          <text class="stats-label">æ€»è®°å½•æ•°</text>
        </view>
        <view class="stats-item">
          <text class="stats-value">{{userStats.avgSystolic || '--'}}</text>
          <text class="stats-label">å¹³å‡æ”¶ç¼©å‹</text>
        </view>
        <view class="stats-item">
          <text class="stats-value">{{userStats.avgDiastolic || '--'}}</text>
          <text class="stats-label">å¹³å‡èˆ’å¼ å‹</text>
        </view>
        <view class="stats-item">
          <text class="stats-value">{{daysSinceFirst || 0}}</text>
          <text class="stats-label">ä½¿ç”¨å¤©æ•°</text>
        </view>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="card menu-card">
    <view class="card-header">
      <text class="card-title">åŠŸèƒ½è®¾ç½®</text>
    </view>
    <view class="card-content">
      <view class="menu-list">
        <view class="menu-item" bindtap="goToSettings">
          <view class="menu-icon">âš™ï¸</view>
          <text class="menu-text">ä¸ªäººè®¾ç½®</text>
          <view class="menu-arrow">></view>
        </view>
        
        <view class="menu-item" bindtap="goToHelp">
          <view class="menu-icon">â“</view>
          <text class="menu-text">ä½¿ç”¨å¸®åŠ©</text>
          <view class="menu-arrow">></view>
        </view>
        
        <view class="menu-item" bindtap="goToAbout">
          <view class="menu-icon">â„¹ï¸</view>
          <text class="menu-text">å…³äºæˆ‘ä»¬</text>
          <view class="menu-arrow">></view>
        </view>
        
        <view class="menu-item" bindtap="clearTestData">
          <view class="menu-icon">ğŸ—‘ï¸</view>
          <text class="menu-text clear-data-text">æ¸…é™¤æµ‹è¯•æ•°æ®</text>
          <view class="menu-arrow">></view>
        </view>
        
        <view class="menu-item" wx:if="{{isLoggedIn}}" bindtap="handleLogout">
          <view class="menu-icon">ğŸšª</view>
          <text class="menu-text logout-text">é€€å‡ºç™»å½•</text>
          <view class="menu-arrow">></view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç‰ˆæœ¬ä¿¡æ¯ -->
  <view class="version-info">
    <text class="version-text">è¡€å‹è®°å½• v{{appVersion}}</text>
    <text class="copyright-text">å¥åº·ç®¡ç†ï¼Œä»è®°å½•å¼€å§‹</text>
  </view>
</view>
