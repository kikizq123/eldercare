# 健康数据记录微信小程序 - 产品需求文档(PRD)

## 1. 项目概述

### 1.1 产品定位
健康数据记录微信小程序是一款专注于个人健康数据管理的轻量级应用，旨在帮助用户方便地记录、查看和管理自己的血压数据，为后续的健康分析和建议功能奠定基础。

### 1.2 产品目标
- 提供简单易用的血压数据记录功能
- 为用户建立完整的血压数据档案
- 通过数据可视化帮助用户了解血压变化趋势
- 为后续健康分析和建议功能提供数据支撑

### 1.3 目标用户
- **主要用户**：关注自身健康的成年人（25-65岁）
- **次要用户**：需要监测血压的慢性病患者
- **潜在用户**：有家庭健康管理需求的用户

## 2. 功能需求

### 2.1 核心功能 - 血压记录

#### 2.1.1 手动记录血压
**功能描述**：用户可以手动输入血压数据并保存

**输入字段**：
- 收缩压（高压）：数值范围 80-250 mmHg
- 舒张压（低压）：数值范围 40-150 mmHg
- 测量时间：默认当前时间，可手动调整
- 备注信息：可选，用于记录测量环境、身体状态等

**功能规则**：
- 收缩压必须大于舒张压
- 时间不能选择未来时间
- 备注字段限制100字符以内
- 数据保存后生成唯一记录ID

#### 2.1.2 血压数据列表
**功能描述**：展示用户的历史血压记录

**显示内容**：
- 按时间倒序排列的血压记录
- 每条记录显示：日期时间、收缩压/舒张压、血压分级标识
- 支持下拉刷新和上拉加载更多
- 每页显示20条记录

**交互功能**：
- 点击单条记录查看详情
- 支持删除记录（需二次确认）
- 支持编辑记录

#### 2.1.3 血压数据详情
**功能描述**：查看单条血压记录的详细信息

**显示内容**：
- 完整的血压数据（收缩压、舒张压）
- 测量时间
- 血压分级和健康状态提示
- 备注信息
- 记录创建时间

**操作功能**：
- 编辑当前记录
- 删除当前记录
- 分享记录（可选）

### 2.2 数据可视化

#### 2.2.1 血压趋势图表
**功能描述**：通过图表展示血压变化趋势

**图表类型**：
- 折线图：显示收缩压和舒张压的时间变化趋势
- 时间范围：7天、30天、90天、自定义

**图表功能**：
- 双Y轴显示收缩压和舒张压
- 标注血压正常范围区间
- 支持点击查看具体数值
- 异常数值高亮显示

#### 2.2.2 血压统计
**功能描述**：提供血压数据的统计分析

**统计指标**：
- 平均收缩压/舒张压
- 最高/最低血压值
- 正常/偏高/偏低记录占比
- 记录频率统计

**时间维度**：
- 本周、本月、最近3个月
- 支持自定义时间范围

### 2.3 辅助功能

#### 2.3.1 用户登录
**功能描述**：基于微信授权的用户登录系统

**登录流程**：
1. 微信授权获取用户基本信息
2. 创建或关联用户账户
3. 进入应用主界面

#### 2.3.2 数据同步
**功能描述**：用户数据云端存储和同步

**同步机制**：
- 实时上传新增记录
- 启动时同步最新数据
- 支持离线记录，联网后同步

#### 2.3.3 健康知识
**功能描述**：提供血压相关的健康知识和建议

**内容类型**：
- 血压分级标准说明
- 血压测量注意事项
- 日常血压管理建议

## 3. 技术需求

### 3.1 技术架构
- **前端**：微信小程序原生开发
- **后端**：Node.js + Express
- **数据库**：MongoDB
- **接口协议**：RESTful API

### 3.2 性能要求
- 页面加载时间 < 2秒
- 接口响应时间 < 500ms
- 支持离线数据暂存
- 图表渲染流畅，支持数据量1000+条

### 3.3 兼容性要求
- 支持微信版本 7.0+
- 适配iOS和Android系统
- 屏幕尺寸适配：375px-414px宽度

## 4. 界面设计要求

### 4.1 设计原则
- 简洁明了，操作便捷
- 适老化设计，字体适中，按钮明显
- 色彩搭配温和，避免过度刺激
- 符合微信小程序设计规范

### 4.2 核心页面结构

#### 4.2.1 首页
- 快速记录按钮（显著位置）
- 最近记录列表（最新3条）
- 本周血压趋势预览
- 底部导航：记录、数据、我的

#### 4.2.2 血压记录页面
- 收缩压输入框（数字键盘）
- 舒张压输入框（数字键盘）
- 测量时间选择器
- 备注输入框（可选）
- 保存按钮

#### 4.2.3 数据展示页面
- 顶部筛选器（时间范围）
- 趋势图表区域
- 统计数据摘要
- 历史记录列表

### 4.3 交互设计
- 输入验证实时提示
- 操作反馈明确（成功/失败提示）
- 加载状态清晰显示
- 错误处理用户友好

## 5. 数据模型

### 5.1 血压记录数据结构
```javascript
BloodPressureRecord {
  id: String,              // 记录唯一标识
  userId: String,          // 用户ID
  systolic: Number,        // 收缩压
  diastolic: Number,       // 舒张压
  measureTime: Date,       // 测量时间
  notes: String,           // 备注信息
  createdAt: Date,         // 创建时间
  updatedAt: Date          // 更新时间
}
```

### 5.2 用户数据结构
```javascript
User {
  id: String,              // 用户唯一标识
  openId: String,          // 微信OpenID
  nickname: String,        // 用户昵称
  avatar: String,          // 头像URL
  createdAt: Date,         // 注册时间
  lastLoginAt: Date        // 最后登录时间
}
```

## 6. API 接口设计

### 6.1 用户相关接口
- `POST /api/users/login` - 用户登录
- `GET /api/users/profile` - 获取用户信息

### 6.2 血压记录接口
- `POST /api/blood-pressure` - 新增血压记录
- `GET /api/blood-pressure` - 获取血压记录列表
- `GET /api/blood-pressure/:id` - 获取单条记录详情
- `PUT /api/blood-pressure/:id` - 更新血压记录
- `DELETE /api/blood-pressure/:id` - 删除血压记录

### 6.3 数据统计接口
- `GET /api/blood-pressure/stats` - 获取血压统计数据
- `GET /api/blood-pressure/chart` - 获取图表数据

## 7. 项目里程碑

### 阶段一：基础功能开发（2周）
- 用户登录系统
- 血压记录功能
- 记录列表展示
- 基础数据校验

### 阶段二：数据可视化（1.5周）
- 血压趋势图表
- 数据统计功能
- 界面优化完善

### 阶段三：测试优化（1周）
- 功能测试
- 性能优化
- 用户体验优化
- 发布准备

## 8. 风险评估

### 8.1 技术风险
- 微信小程序API变更风险：**低**
- 数据存储和同步稳定性：**中**
- 图表组件性能问题：**中**

### 8.2 产品风险
- 用户接受度和使用习惯：**中**
- 数据准确性依赖用户手动输入：**高**
- 竞品功能差异化不足：**中**

### 8.3 合规风险
- 健康数据隐私保护：**高**
- 医疗建议合规性：**中**

## 9. 后续规划

### 9.1 功能扩展计划
- 增加更多健康指标（血糖、体重、心率等）
- 智能健康分析和建议
- 家庭成员数据共享
- 医生/专业机构对接

### 9.2 技术优化方向
- 数据可视化效果提升
- 智能提醒和推送
- 离线数据处理优化
- 数据导出功能

---

**文档版本**：v1.0  
**最后更新**：2024年8月23日  
**文档状态**：待评审