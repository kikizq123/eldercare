<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card card">
    <view class="user-info">
      <view class="user-avatar">
        <text class="avatar-text">{{userInfo.name ? userInfo.name.charAt(0) : 'ç”¨'}}</text>
      </view>
      <view class="user-details">
        <text class="user-name">{{userInfo.name || 'ç”¨æˆ·'}}</text>
        <text class="user-role">{{userInfo.role === 'elder' ? 'é•¿è¾ˆç”¨æˆ·' : 'å®¶åº­æˆå‘˜'}}</text>
      </view>
    </view>
    <navigator url="/pages/profile/index" class="profile-btn">
      <text>ä¸ªäººèµ„æ–™</text>
    </navigator>
  </view>

  <!-- å¿«é€Ÿæ“ä½œæŒ‰é’® -->
  <view class="quick-actions">
    <navigator url="/pages/data/index" class="action-btn">
      <view class="action-icon">ğŸ“Š</view>
      <text class="action-text">è®°å½•æ•°æ®</text>
    </navigator>
    <navigator url="/pages/reminder/index" class="action-btn">
      <view class="action-icon">ğŸ’Š</view>
      <text class="action-text">ç”¨è¯æé†’</text>
    </navigator>
    <navigator url="/pages/rehab/index" class="action-btn">
      <view class="action-icon">ğŸ‹ï¸</view>
      <text class="action-text">åº·å¤é”»ç‚¼</text>
    </navigator>
    <navigator url="/pages/bind/index" class="action-btn">
      <view class="action-icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</view>
      <text class="action-text">å®¶åº­ç»‘å®š</text>
    </navigator>
  </view>

  <!-- ä»Šæ—¥å¥åº·æ•°æ®æ‘˜è¦ -->
  <view class="health-summary card">
    <view class="card-header">
      <text class="card-title">ä»Šæ—¥å¥åº·æ•°æ®</text>
      <navigator url="/pages/data-detail/index" class="more-btn">æŸ¥çœ‹æ›´å¤š</navigator>
    </view>
    <view class="health-items" wx:if="{{healthData.length > 0}}">
      <view class="health-item" wx:for="{{healthData}}" wx:key="type">
        <view class="health-icon">
          <text wx:if="{{item.type === 'bloodPressure'}}">ğŸ©¸</text>
          <text wx:elif="{{item.type === 'bloodSugar'}}">ğŸ¯</text>
          <text wx:elif="{{item.type === 'weight'}}">âš–ï¸</text>
          <text wx:elif="{{item.type === 'temperature'}}">ğŸŒ¡ï¸</text>
          <text wx:else>ğŸ“Š</text>
        </view>
        <view class="health-info">
          <text class="health-type">
            {{item.type === 'bloodPressure' ? 'è¡€å‹' : 
              item.type === 'bloodSugar' ? 'è¡€ç³–' : 
              item.type === 'weight' ? 'ä½“é‡' : 
              item.type === 'temperature' ? 'ä½“æ¸©' : 'æ•°æ®'}}
          </text>
          <text class="health-value">{{item.value}} {{item.unit}}</text>
        </view>
        <view class="health-status {{item.isNormal ? 'normal' : 'abnormal'}}">
          <text>{{item.isNormal ? 'æ­£å¸¸' : 'å¼‚å¸¸'}}</text>
        </view>
      </view>
    </view>
    <view class="empty-tip" wx:else>
      <text>æš‚æ— å¥åº·æ•°æ®ï¼Œç‚¹å‡»"è®°å½•æ•°æ®"å¼€å§‹è®°å½•</text>
    </view>
  </view>

  <!-- ä»Šæ—¥ç”¨è¯æé†’ -->
  <view class="medication-summary card">
    <view class="card-header">
      <text class="card-title">ä»Šæ—¥ç”¨è¯æé†’</text>
      <navigator url="/pages/reminder/index" class="more-btn">ç®¡ç†ç”¨è¯</navigator>
    </view>
    <view class="medication-items" wx:if="{{medications.length > 0}}">
      <view class="medication-item" wx:for="{{medications}}" wx:key="_id">
        <view class="med-info">
          <text class="med-name">{{item.name}}</text>
          <text class="med-dosage">{{item.dosage}} Â· {{item.displayTimes}}</text>
        </view>
        <view class="med-status {{item.takenToday ? 'taken' : 'pending'}}">
          <text>{{item.takenToday ? 'å·²æœç”¨' : 'å¾…æœç”¨'}}</text>
        </view>
      </view>
    </view>
    <view class="empty-tip" wx:else>
      <text>æš‚æ— ç”¨è¯è®¡åˆ’ï¼Œç‚¹å‡»"ç”¨è¯æé†’"æ·»åŠ </text>
    </view>
  </view>

  <!-- ç´§æ€¥æ±‚åŠ©æŒ‰é’® -->
  <button class="sos-button" bindtap="handleSOS">
    <text class="sos-icon">ğŸš¨</text>
    <text class="sos-text">ç´§æ€¥æ±‚åŠ©</text>
  </button>

  <!-- å¼€å‘è°ƒè¯•ç”¨é‡ç½®æŒ‰é’® -->
  <button class="reset-button" bindtap="resetApp">é‡ç½®åº”ç”¨</button>
</view> 