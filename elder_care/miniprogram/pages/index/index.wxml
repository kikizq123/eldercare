<view class="container">
  <view class="role-info" wx:if="{{role}}">
    å½“å‰èº«ä»½ï¼š{{role === 'elder' ? 'é•¿è¾ˆ' : 'å®¶äºº'}}
  </view>
  <view class="userinfo">
    <block wx:if="{{canIUse}}">
      <button wx:if="{{!hasUserInfo}}" open-type="getUserInfo" bindgetuserinfo="getUserInfo">è·å–ç”¨æˆ·ä¿¡æ¯</button>
      <view wx:else class="userinfo-avatar">
        <image bindtap="bindViewTap" class="userinfo-avatar" src="{{userInfo.avatarUrl}}" mode="cover"></image>
        <text class="userinfo-nickname">{{userInfo.nickName}}</text>
      </view>
    </block>
  </view>

  <view class="health-data">
    <view class="section-title">ä»Šæ—¥å¥åº·æ•°æ®</view>
    <view class="data-list" style="height: 49rpx; display: block; box-sizing: border-box">
      <view class="data-item" wx:for="{{healthData}}" wx:key="id">
        <text class="data-type">{{item.type}}</text>
        <text class="data-value">{{item.value}}{{item.unit}}</text>
        <text class="data-time">{{item.timestamp}}</text>
      </view>
    </view>
  </view>

  <view class="navi-buttons">
    <navigator url="/pages/data/index" class="navi-btn">
      <view class="navi-icon">ğŸ“Š</view>
      <view class="navi-text">å¥åº·æ•°æ®</view>
    </navigator>
    <navigator url="/pages/reminder/index" class="navi-btn">
      <view class="navi-icon">ğŸ’Š</view>
      <view class="navi-text">ç”¨è¯æé†’</view>
    </navigator>
    <navigator url="/pages/rehab/index" class="navi-btn">
      <view class="navi-icon">ğŸ‹ï¸</view>
      <view class="navi-text">åº·å¤æ‰“å¡</view>
    </navigator>
  </view>

  <view class="medication">
    <view class="section-title">ä»Šæ—¥ç”¨è¯æé†’</view>
    <view class="medication-list" style="height: 49rpx; display: block; box-sizing: border-box">
      <view class="medication-item" wx:for="{{medications}}" wx:key="id">
        <text class="medication-name">{{item.name}}</text>
        <text class="medication-dosage">{{item.dosage}}</text>
        <text class="medication-time">{{item.schedule[0].time}}</text>
        <button class="medication-taken" bindtap="markTaken" data-id="{{item._id}}">å·²æœç”¨</button>
      </view>
    </view>
  </view>

  <button class="sos-button" bindtap="handleSOS">ç´§æ€¥æ±‚åŠ©</button>

  <!-- å¼€å‘è°ƒè¯•ç”¨é‡ç½®æŒ‰é’® -->
  <button class="reset-button" bindtap="resetApp" style="margin-top: 30rpx; font-size: 24rpx; color: #999; background: #f0f0f0; width: 50%;">é‡ç½®åº”ç”¨</button>
</view> 